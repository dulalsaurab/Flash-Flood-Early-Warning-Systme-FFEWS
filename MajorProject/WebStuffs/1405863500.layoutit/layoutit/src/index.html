<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bootstrap 3, from LayoutIt!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

	<!--link rel="stylesheet/less" href="less/bootstrap.less" type="text/css" /-->
	<!--link rel="stylesheet/less" href="less/responsive.less" type="text/css" /-->
	<!--script src="js/less-1.3.3.min.js"></script-->
	<!--append ‘#!watch’ to the browser URL, then refresh the page. -->
	
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="img/favicon.png">
  
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/scripts.js"></script>

	<script>
		$(document).ready(function () {
		    $('.carousel').carousel({
		        interval: false
		    });
		});
	</script>


	
	<style>
		/* tell the SVG path to be a thin blue line without any area fill */
		path {
			stroke: steelblue;
			stroke-width: 1;
			fill: none;
		}
		#map_canvas {
        width: 860px;
        height: 540px;
        /*margin-left: -100px;*/
        /*margin-top: 20px;*/
      }
      .verticalBar{
   		width: 100px;
    	background-color: #adadad;
	  }

	  .grid .tick {
		    stroke: lightgrey;
		    opacity: 0.7;
		}
		.grid path {
		      stroke-width: 10;
		}
		.grid .tick {
		    stroke: lightgrey;
		    opacity: 0.7;
		}
		.grid path {
		      stroke-width: 0;
		}
		.axis line {
		    fill: none;
		    stroke: grey;
		    stroke-width: 1;
		    shape-rendering: crispEdges;
		}
	</style>
	
	<script src="https://maps.googleapis.com/maps/api/js"></script>
	<script src="js/d3.v2.js"></script>

	<script>
	function initialize() {
        var map_canvas = document.getElementById('map_canvas');
        var map_options = {
          center: new google.maps.LatLng(44.5403, -78.5463),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(map_canvas, map_options)
    }
    google.maps.event.addDomListener(window, 'load', initialize);
	</script>
    


</head>

<body>
<!-- <div class="container" style="margin-top:20px;"> -->
	<!-- <div class="row clearfix"> -->
		<div class="col-md-8 column" style="margin-top:20px;">
			<div id="map_canvas"></div>
		</div>
		<div class="col-md-4 column" style="margin-top:20px;">
			

			<div class="carousel slide" id="carousel-663717">
				<ol class="carousel-indicators">
					<li class="active" data-slide-to="0" data-target="#carousel-663717">
					</li>
					<li data-slide-to="1" data-target="#carousel-663717">
					</li>
					<li data-slide-to="2" data-target="#carousel-663717">
					</li>
				</ol>
				<div class="carousel-inner">
					<div class="item active">
						<div class="panel panel-info">
							<div class="panel-heading">
								<h3 class="panel-title">
									Rainfall
								</h3>
							</div>
							<div class="panel-body">

									<div id="rainfallGraph" class="aGraph" style="height:200px;"></div>
								
							</div>
							<div class="panel-footer">
								
							</div>
						</div>
						<div class="carousel-caption">
							<!-- <h4>
								Rainfall
							</h4>
							<p>
								Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.
							</p> -->
						</div>
					</div>
					<div class="item">
						<div class="panel panel-info">
							<div class="panel-heading">
								<h3 class="panel-title">
									Temperature
								</h3>
							</div>
							<div class="panel-body">

									<div id="temperatureGraph" class="aGraph" style="height:200px;"></div>
								
							</div>
							<div class="panel-footer">
								
							</div>
						</div>
						<div class="carousel-caption">
							<!-- <h4>
								Second Thumbnail label
							</h4>
							<p>
								Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.
							</p> -->
						</div>
					</div>
					<div class="item">
						<div class="panel panel-info">
							<div class="panel-heading">
								<h3 class="panel-title">
									Discharge
								</h3>
							</div>
							<div class="panel-body">

									<div id="dischargeGraph" class="aGraph" style="height:200px;"></div>
								
							</div>
							<div class="panel-footer">
								
							</div>
						</div>
						<div class="carousel-caption">
							<!-- <h4>
								Third Thumbnail label
							</h4>
							<p>
								Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.
							</p> -->
						</div>
					</div>
				</div> <a class="left carousel-control" href="#carousel-663717" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" href="#carousel-663717" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
			</div>

		</div>
	<!-- </div> -->
<!-- </div> -->



<script>
      

      function displayGraphExample(id, width, height, interpolation, animate, updateDelay, transitionDelay) {


  //     	var vis = d3.select('#visualisation'),
		//     WIDTH = 1000,
		//     HEIGHT = 500,
		//     MARGINS = {
		//       top: 20,
		//       right: 20,
		//       bottom: 20,
		//       left: 50
		//     },
		//     xRange = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([d3.min(lineData, function(d) {
		//       return d.x;
		//     }), d3.max(lineData, function(d) {
		//       return d.x;
		//     })]),
		//     yRange = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([d3.min(lineData, function(d) {
		//       return d.y;
		//     }), d3.max(lineData, function(d) {
		//       return d.y;
		//     })]),
		//     xAxis = d3.svg.axis()
		//       .scale(xRange)
		//       .tickSize(5)
		//       .tickSubdivide(true),
		//     yAxis = d3.svg.axis()
		//       .scale(yRange)
		//       .tickSize(5)
		//       .orient('left')
		//       .tickSubdivide(true);
		 
		// vis.append('svg:g')
		//   .attr('class', 'x axis')
		//   .attr('transform', 'translate(0,' + (HEIGHT - MARGINS.bottom) + ')')
		//   .call(xAxis);
		 
		// vis.append('svg:g')
		//   .attr('class', 'y axis')
		//   .attr('transform', 'translate(' + (MARGINS.left) + ',0)')
		//   .call(yAxis);

		var data = [3, 6, 2, 7, 5, 2, 1, 3, 8, 9, 2, 5, 9, 3, 6, 3, 6, 2, 7, 5, 2, 1, 3, 8, 9, 2, 5, 9, 2, 7, 5, 2, 1, 3, 8, 9, 2, 5, 9, 3, 6, 2, 7, 5, 2, 1, 3, 8, 9, 2, 9];
		var margin = {top: 30, right: 20, bottom: 30, left: 50},
		width = width - margin.left - margin.right,
    	height = height - margin.top - margin.bottom;;



		// create an SVG element inside the #graph div that fills 100% of the div
		var graph = d3.select(id).append("svg:svg").attr("width", "100%").attr("height", "100%").append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");



 
		// create a simple data array that we'll plot with a line (this array represents only the Y values, X will just be the index location)
		
 
		// X scale will fit values from 0-10 within pixels 0-100
		var x = d3.scale.linear().domain([0, 48]).range([0, width]); // starting point is -5 so the first value doesn't show and slides off the edge as part of the transition
		// Y scale will fit values from 0-10 within pixels 0-100
		var y = d3.scale.linear().domain([0, 10]).range([0, height]);

		

		
 
		// create a line object that represents the SVN line we're creating
		var line = d3.svg.line()
			// assign the X function to plot our line as we wish
			.x(function(d,i) { 
				// verbose logging to show what's actually being done
				//console.log('Plotting X value for data point: ' + d + ' using index: ' + i + ' to be at: ' + x(i) + ' using our xScale.');
				// return the X coordinate where we want to plot this datapoint
				return x(i); 
			})
			.y(function(d) { 
				// verbose logging to show what's actually being done
				//console.log('Plotting Y value for data point: ' + d + ' to be at: ' + y(d) + " using our yScale.");
				// return the Y coordinate where we want to plot this datapoint
				return y(d); 
			})
			.interpolate(interpolation)
	
			// display the line by appending an svg:path element with the data line we created above
			graph.append("svg:path").attr("d", line(data));

			// graph.append("g")         
		 //        .attr("class", "grid")
		 //        .attr("transform", "translate(0," + height + ")")
		 //        .call(make_x_axis()
		 //            .tickSize(-height, 0, 0)
		 //            .tickFormat("")
		 //        )

		 //    graph.append("g")         
		 //        .attr("class", "grid")
		 //        .call(make_y_axis()
		 //            .tickSize(-width, 0, 0)
		 //            .tickFormat("")
		 //        )



		   	graph.append("g")			// Add the X Axis
		        .attr("class", "x axis")
		        .attr("transform", "translate(0," + height + ")")
		        .call(make_x_axis()
			            .tickSize(-height, 0, 0)
			            .tickFormat(""));

	        graph.append("text")
		        // .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.bottom) + ")")
		        .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.bottom) + ")")
		        .style("text-anchor", "middle")
		        .text("Date");

		    graph.append("g")			// Add the Y Axis
		        .attr("class", "y axis")
		        .call(make_y_axis()
		            .tickSize(-width, 0, 0)
		            .tickFormat(""));


		    graph.append("text")
		        .attr("transform", "rotate(-90)")
		        .attr("y", 0 - margin.left )
		        .attr("x",0 - (height / 2) )
		        .attr("dy", "1em")
		        .style("text-anchor", "middle")
		        .text("Amount");

			
			
			// or it can be done like this
			//graph.selectAll("path").data([data]).enter().append("svg:path").attr("d", line);


			
			
			function redrawWithAnimation() {
				// update with animation
				graph.selectAll("path")
					.data([data]) // set the new data
					.attr("transform", "translate(" + x(1) + ")") // set the transform to the right by x(1) pixels (6 for the scale we've set) to hide the new value
					.attr("d", line) // apply the new data values ... but the new value is hidden at this point off the right of the canvas
					.transition() // start a transition to bring the new value into view
					.ease("linear")
					.duration(transitionDelay) // for this demo we want a continual slide so set this to the same as the setInterval amount below
					.attr("transform", "translate(" + x(0) + ")"); // animate a slide to the left back to x(0) pixels to reveal the new value
					
					/* thanks to 'barrym' for examples of transform: https://gist.github.com/1137131 */
			}
			
			function redrawWithoutAnimation() {
				// static update without animation
				graph.selectAll("path")
					.data([data]) // set the new data
					.attr("d", line); // apply the new data values
			}

			function make_x_axis() {        
			    return d3.svg.axis()
			        .scale(x)
			         .orient("bottom")
			         .ticks(5)
			         
			}

			function make_y_axis() {        
			    return d3.svg.axis()
			        .scale(y)
			        .orient("left")
			        .ticks(5)
			        
			}
			
			setInterval(function() {
			   var v = data.shift(); // remove the first element of the array
			   data.push(v); // add a new element to the array (we're just taking the number we just shifted off the front and appending to the end)
			   if(animate) {
				   redrawWithAnimation();
			   } else {
			   	   redrawWithoutAnimation();
			   }
			}, updateDelay);
		}

      displayGraphExample("#rainfallGraph", 420, 200, "basis", true, 1000, 1000);
      displayGraphExample("#temperatureGraph", 420, 200, "basis", true, 1000, 1000);
      displayGraphExample("#dischargeGraph", 420, 200, "basis", true, 1000, 1000);
      
    </script>
</body>
</html>
